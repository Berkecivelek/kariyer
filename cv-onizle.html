<!DOCTYPE html>

<html class="light" lang="tr"><head>

<meta charset="utf-8"/>

<meta content="width=device-width, initial-scale=1.0" name="viewport"/>

<title>CV Ã–nizleme EkranÄ±</title>

<link href="https://fonts.googleapis.com" rel="preconnect"/>

<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>

<link href="https://fonts.googleapis.com/css2?family=Manrope:wght@200..800&amp;display=swap" rel="stylesheet"/>

<link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&amp;display=swap" rel="stylesheet"/>

<style>.no-scrollbar::-webkit-scrollbar {

            display: none;

        }

        .no-scrollbar {

            -ms-overflow-style: none;

            scrollbar-width: none;

        }

        .custom-scrollbar::-webkit-scrollbar {

            width: 8px;

            height: 8px;

        }

        .custom-scrollbar::-webkit-scrollbar-track {

            background: transparent;

        }

        .custom-scrollbar::-webkit-scrollbar-thumb {

            background-color: #cbd5e1;

            border-radius: 4px;

        }

        .dark .custom-scrollbar::-webkit-scrollbar-thumb {

            background-color: #334155;

        }

        .a4-paper {

            width: 210mm;

            min-height: 297mm;

            background: white;

            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);

            border-radius: 8px;

            transform: scale(0.85);

            transform-origin: top center;

            position: relative;

            overflow: hidden;

        }

        @media (max-width: 850px) {

            .a4-paper {

                transform: scale(0.6) !important;

                transform-origin: top center;

                margin-bottom: -40%;

            }

        }

        /* PRINT STYLES - TEK SAYFA A4 - OPTIMIZED (NO SCALE) */
        @media print {
            @page {
                size: A4 portrait;
                margin: 0;
            }

            * {
                -webkit-print-color-adjust: exact !important;
                print-color-adjust: exact !important;
                color-adjust: exact !important;
            }

            html, body {
                margin: 0 !important;
                padding: 0 !important;
                background: white !important;
                width: 210mm !important;
                height: 297mm !important;
                overflow: hidden !important;
            }

            /* Hide all UI elements during print */
            header,
            nav,
            aside:not(#cv-preview-container),
            footer,
            button,
            .no-print,
            #zoom-decrease,
            #zoom-increase,
            #zoom-level,
            #fit-screen-btn {
                display: none !important;
                visibility: hidden !important;
            }

            /* Show only CV preview container */
            main {
                padding: 0 !important;
                margin: 0 !important;
                background: white !important;
                width: 210mm !important;
                height: 297mm !important;
                overflow: hidden !important;
                display: flex !important;
                justify-content: center !important;
                align-items: flex-start !important;
            }

            .flex-1.overflow-auto {
                padding: 0 !important;
                margin: 0 !important;
                width: 210mm !important;
                height: 297mm !important;
                overflow: hidden !important;
                display: flex !important;
                justify-content: center !important;
                align-items: flex-start !important;
            }

            /* CV container - PRESERVE ORIGINAL LAYOUT */
            #cv-preview-container {
                position: relative !important;
                width: 210mm !important;
                max-width: 210mm !important;
                min-height: auto !important; /* Ä°Ã§eriÄŸe gÃ¶re ayarlansÄ±n */
                max-height: 297mm !important; /* A4 yÃ¼ksekliÄŸi */
                margin: 0 auto !important;
                padding: 15mm 12mm !important; /* Daha fazla padding - orijinal gÃ¶rÃ¼nÃ¼m iÃ§in */
                background: white !important;
                box-shadow: none !important;
                border-radius: 0 !important;
                overflow: visible !important; /* Ä°Ã§erik taÅŸmasÄ±nÄ± gÃ¶ster */
                transform: none !important; /* NO SCALE */
                transform-origin: top center !important;
                page-break-after: avoid !important;
                page-break-before: avoid !important;
                page-break-inside: avoid !important;
                box-sizing: border-box !important;
            }

            /* PRESERVE ORIGINAL FONT SIZES - Sadece hafif optimizasyon */
            #cv-preview-container h1 {
                font-size: 24px !important; /* Orijinal boyut */
                line-height: 1.3 !important;
                margin-bottom: 6px !important;
            }

            #cv-preview-container h2 {
                font-size: 16px !important; /* Orijinal boyut */
                line-height: 1.4 !important;
                margin-top: 10px !important;
                margin-bottom: 6px !important;
            }

            #cv-preview-container h3 {
                font-size: 14px !important; /* Orijinal boyut */
                line-height: 1.4 !important;
                margin-bottom: 4px !important;
            }

            #cv-preview-container p,
            #cv-preview-container li,
            #cv-preview-container span {
                font-size: 11px !important; /* Okunabilir boyut */
                line-height: 1.5 !important; /* Daha fazla satÄ±r aralÄ±ÄŸÄ± */
                margin: 2px 0 !important;
            }

            /* Preserve section spacing */
            #cv-preview-container section {
                margin-bottom: 10px !important; /* Orijinal spacing */
                page-break-inside: avoid !important;
            }

            /* Ensure all content is visible (including images) */
            #cv-preview-container * {
                visibility: visible !important;
                color: inherit !important;
            }

            /* Images and visual elements must be visible */
            #cv-preview-container img,
            #cv-preview-container svg,
            #cv-preview-container [style*="background-image"] {
                display: block !important;
                visibility: visible !important;
                max-width: 100% !important;
                height: auto !important;
            }

            /* Prevent any page breaks */
            *, *::before, *::after {
                page-break-inside: avoid !important;
                page-break-after: avoid !important;
                page-break-before: avoid !important;
                break-inside: avoid !important;
            }

            /* Text rendering */
            * {
                text-rendering: optimizeLegibility !important;
                -webkit-font-smoothing: antialiased !important;
                -moz-osx-font-smoothing: grayscale !important;
            }
        }

    </style>

<!-- Tailwind CSS -->
<link rel="stylesheet" href="css/tailwind.css">
</head>

<body class="bg-background-light dark:bg-background-dark font-display text-slate-900 dark:text-white h-screen flex flex-col overflow-hidden">

<header class="flex shrink-0 items-center justify-between whitespace-nowrap border-b border-solid border-slate-200 dark:border-slate-800 bg-white dark:bg-[#1a1d2d] px-6 py-3 z-20 shadow-sm no-print">

<div class="flex items-center gap-6 text-slate-900 dark:text-white">

<button id="back-btn" class="flex items-center gap-2 text-slate-500 hover:text-primary dark:text-slate-400 dark:hover:text-white transition-colors group">

<span class="size-8 rounded-full bg-slate-50 dark:bg-slate-800 group-hover:bg-primary/10 flex items-center justify-center transition-colors">

<span class="material-symbols-outlined text-[20px] group-hover:-translate-x-0.5 transition-transform">arrow_back</span>

</span>

<span class="text-sm font-bold hidden md:block">DÃ¼zenlemeye Geri DÃ¶n</span>

</button>

<div class="h-6 w-px bg-slate-200 dark:bg-slate-700 hidden md:block"></div>

<div class="flex flex-col">

<h2 class="text-slate-900 dark:text-white text-base md:text-lg font-bold leading-tight">CV Ã–nizleme</h2>

<span id="last-edited" class="text-xs text-slate-500 dark:text-slate-400 font-medium">Son dÃ¼zenleme: Az Ã¶nce</span>

</div>

</div>

<div class="flex items-center justify-end gap-4">

<button id="print-btn" class="hidden md:flex cursor-pointer items-center justify-center rounded-lg h-10 px-4 bg-white border border-slate-200 dark:bg-slate-800 dark:border-slate-700 text-slate-700 dark:text-slate-300 text-sm font-bold hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors">

<span class="material-symbols-outlined mr-2 text-[18px]">print</span>

            YazdÄ±r

        </button>

<button id="pdf-download-btn" class="flex cursor-pointer items-center justify-center rounded-lg h-10 px-5 bg-primary hover:bg-primary-dark transition-colors text-white text-sm font-bold shadow-lg shadow-blue-500/20">

<span class="material-symbols-outlined mr-2 text-[20px]">download</span>

            PDF Ä°ndir

        </button>

<div class="bg-center bg-no-repeat aspect-square bg-cover rounded-full size-10 border-2 border-white dark:border-slate-700 shadow-sm cursor-pointer ml-2" data-alt="User profile picture" style='background-image: url("https://lh3.googleusercontent.com/aida-public/AB6AXuBPtulyC-jyxhu96_BeHp_Uhp1D9-5B3yVAQvdI__pjHMPOCGCa7-7PLigmueLCgya2-Zg49rWVjurDvcW7BZgmkzdCx7vRcSJuT57BqWGwoiTwbON20VpauuAvHtbXASniisuTML24qjMQvQcj4PReD8F7zkvRiPU5YH98HH3pv0yjypYyeYCDFj_CurHOHgY88RuwCpoKTqbQ2HxlzcPNY02bwE5GHBPbgFJ70moEh7LvrXHuNwpnVFqehuVaaXWiaSrp4ZJaMrAE");'></div>

</div>

</header>

<main class="flex-1 overflow-hidden relative bg-slate-100 dark:bg-[#0c0e15] flex flex-col">

<div class="flex-1 overflow-auto custom-scrollbar p-8 md:p-12 flex justify-center items-start">

<div id="cv-preview-container" class="a4-paper p-8 md:p-10 flex flex-col text-slate-800">

<!-- CV iÃ§eriÄŸi buraya dinamik olarak yÃ¼klenecek -->

</div>

</div>

<div class="absolute bottom-6 right-6 md:right-10 flex items-center gap-2 bg-white dark:bg-[#1a1d2d] border border-slate-200 dark:border-slate-700 p-1.5 rounded-lg shadow-xl shadow-slate-200/50 dark:shadow-black/40 z-30 no-print">

<button id="zoom-decrease" class="size-8 flex items-center justify-center rounded hover:bg-slate-100 dark:hover:bg-slate-700 text-slate-600 dark:text-slate-300 transition-colors">

<span class="material-symbols-outlined text-[20px]">remove</span>

</button>

<div id="zoom-level" class="w-12 text-center text-sm font-bold text-slate-700 dark:text-slate-300 select-none">85%</div>

<button id="zoom-increase" class="size-8 flex items-center justify-center rounded hover:bg-slate-100 dark:hover:bg-slate-700 text-slate-600 dark:text-slate-300 transition-colors">

<span class="material-symbols-outlined text-[20px]">add</span>

</button>

<div class="w-px h-5 bg-slate-200 dark:bg-slate-700 mx-1"></div>

<button id="fit-screen-btn" class="size-8 flex items-center justify-center rounded hover:bg-slate-100 dark:hover:bg-slate-700 text-slate-600 dark:text-slate-300 transition-colors" title="Tam Ekrana SÄ±ÄŸdÄ±r">

<span class="material-symbols-outlined text-[20px]">fit_screen</span>

</button>

</div>

</main>

<!-- PDF iÃ§in browser native print engine kullanÄ±lÄ±yor - canvas kÃ¼tÃ¼phaneleri kaldÄ±rÄ±ldÄ± -->
<script src="js/api-client.js"></script>
<script src="js/auth-guard.js"></script>
<script src="js/auth-header.js"></script>
<script src="js/cv-template-renderer.js"></script>
<script src="cv-preview-loader.js"></script>
<script>
(function() {
    'use strict';
    
    // Geri dÃ¶n butonu
    const backBtn = document.getElementById('back-btn');
    if (backBtn) {
        // Buton metnini gÃ¼ncelle
        const backBtnText = backBtn.querySelector('span.text-sm');
        if (backBtnText) {
            backBtnText.textContent = 'Geri DÃ¶n';
        }
        
        backBtn.addEventListener('click', function() {
            // Hangi sayfadan geldiÄŸini kontrol et
            const referrer = document.referrer;
            if (referrer && (referrer.includes('dashboard') || referrer.includes('belgelerim'))) {
                // Dashboard veya Belgelerim sayfasÄ±ndan geldiyse oraya dÃ¶n
                window.history.back();
            } else if (referrer && referrer.includes('cv-olusturucu')) {
                // CV oluÅŸturucu sayfasÄ±ndan geldiyse oraya dÃ¶n
                window.history.back();
            } else {
                // VarsayÄ±lan olarak dashboard'a dÃ¶n
                window.location.href = 'dashboard.html';
            }
        });
    }
    
    // YazdÄ±r butonu
    const printBtn = document.getElementById('print-btn');
    if (printBtn) {
        printBtn.addEventListener('click', function() {
            window.print();
        });
    }
    
    // PDF Ä°ndir butonu
    const pdfBtn = document.getElementById('pdf-download-btn');
    if (pdfBtn) {
        pdfBtn.addEventListener('click', async function() {
            // PDF indirme iÃ§in giriÅŸ gerekmez, direkt frontend'de oluÅŸturuluyor
            
            // originalText'i try bloÄŸu dÄ±ÅŸÄ±nda tanÄ±mla (hata durumunda da eriÅŸilebilir olsun)
            const originalText = pdfBtn.innerHTML;
            
            // Frontend'de direkt PDF oluÅŸtur
            try {
                // Loading state gÃ¶ster
                pdfBtn.disabled = true;
                pdfBtn.innerHTML = '<span class="material-symbols-outlined mr-2 text-[20px] animate-spin">hourglass_empty</span> Ä°ndiriliyor...';
                
                // Frontend'de PDF oluÅŸtur (backend'e baÄŸÄ±mlÄ± deÄŸil)
                await generatePDFFromHTML();
                console.log('âœ… PDF Ä°ndirme: PDF baÅŸarÄ±yla oluÅŸturuldu ve indirildi');
            } catch (error) {
                console.error('âŒ PDF indirme hatasÄ±:', error);
                const errorMessage = error.message || 'Bilinmeyen hata';
                alert('PDF indirilemedi: ' + errorMessage);
            } finally {
                // Loading state'i kaldÄ±r
                if (pdfBtn) {
                    pdfBtn.disabled = false;
                    pdfBtn.innerHTML = originalText;
                }
            }
        });
    }
    
    // waitForHtml2Pdf fonksiyonu kaldÄ±rÄ±ldÄ± - artÄ±k browser native print kullanÄ±lÄ±yor
    
    // Browser native print engine kullanarak PDF oluÅŸturma
    // GOAL: Pixel-perfect 1:1 copy of preview using browser's print engine
    async function generatePDFFromHTML() {
        const container = document.getElementById('cv-preview-container');
        if (!container) {
            throw new Error('CV Ã¶nizleme container bulunamadÄ±');
        }
        
        // Container'Ä±n iÃ§eriÄŸinin yÃ¼klendiÄŸinden emin ol
        if (!container.innerHTML || container.innerHTML.trim() === '' || container.innerHTML.includes('CV iÃ§eriÄŸi buraya dinamik olarak yÃ¼klenecek')) {
            throw new Error('CV iÃ§eriÄŸi henÃ¼z yÃ¼klenmedi. LÃ¼tfen birkaÃ§ saniye bekleyip tekrar deneyin.');
        }
        
        // FontlarÄ±n yÃ¼klenmesini bekle
        if (document.fonts && document.fonts.ready) {
            await document.fonts.ready;
        }
        
        // Resimlerin yÃ¼klenmesini bekle
        const images = container.querySelectorAll('img');
        if (images.length > 0) {
            await Promise.all(Array.from(images).map(img => {
                if (img.complete && img.naturalWidth > 0) return Promise.resolve();
                return new Promise((resolve) => {
                    img.onload = resolve;
                    img.onerror = resolve;
                    setTimeout(resolve, 2000);
                });
            }));
        }
        
        // Ä°Ã§eriÄŸin render edilmesini bekle
        await new Promise(resolve => setTimeout(resolve, 300));
        
        // Browser native print engine'i kullan
        // @media print CSS'i otomatik olarak uygulanacak
        window.print();
    }
    
    // Zoom kontrolleri
    // BaÅŸlangÄ±Ã§ scale'i 0.85 (canlÄ± Ã¶nizleme ile aynÄ±)
    let currentZoom = parseInt(localStorage.getItem('cv-zoom-level') || '85');
    const zoomDecreaseBtn = document.getElementById('zoom-decrease');
    const zoomIncreaseBtn = document.getElementById('zoom-increase');
    const zoomLevelSpan = document.getElementById('zoom-level');
    const fitScreenBtn = document.getElementById('fit-screen-btn');
    const cvContainer = document.getElementById('cv-preview-container');
    
    function updateZoom() {
        if (!cvContainer) return;
        
        // Zoom seviyesini scale'e Ã§evir (85% = 0.85)
        const scale = currentZoom / 100;
        cvContainer.style.transform = `scale(${scale})`;
        cvContainer.style.transformOrigin = 'top center';
        
        if (zoomLevelSpan) {
            zoomLevelSpan.textContent = currentZoom + '%';
        }
        
        localStorage.setItem('cv-zoom-level', currentZoom.toString());
    }
    
    // Sayfa yÃ¼klendiÄŸinde zoom'u uygula (CSS'teki 0.85 scale'i override eder)
    function applyInitialZoom() {
        if (cvContainer) {
            updateZoom();
        }
    }
    
    if (zoomDecreaseBtn) {
        zoomDecreaseBtn.addEventListener('click', function() {
            if (currentZoom > 25) {
                currentZoom -= 5;
                updateZoom();
            }
        });
    }
    
    if (zoomIncreaseBtn) {
        zoomIncreaseBtn.addEventListener('click', function() {
            if (currentZoom < 150) {
                currentZoom += 5;
                updateZoom();
            }
        });
    }
    
    if (fitScreenBtn) {
        fitScreenBtn.addEventListener('click', function() {
            // Ekrana sÄ±ÄŸdÄ±r
            const container = document.querySelector('.flex-1.overflow-auto');
            if (container && cvContainer) {
                const containerWidth = container.clientWidth;
                const containerHeight = container.clientHeight;
                const paperWidth = 210; // mm
                const paperHeight = 297; // mm
                
                // mm'yi px'e Ã§evir (1mm = 3.779527559px)
                const paperWidthPx = paperWidth * 3.779527559;
                const paperHeightPx = paperHeight * 3.779527559;
                
                const scaleX = (containerWidth - 100) / paperWidthPx;
                const scaleY = (containerHeight - 100) / paperHeightPx;
                const scale = Math.min(scaleX, scaleY, 1);
                
                currentZoom = Math.round(scale * 100);
                updateZoom();
            }
        });
    }
    
    // CV'yi yÃ¼kle ve render et
    async function loadAndRenderCV() {
        const container = document.getElementById('cv-preview-container');
        if (!container) return;
        
        // URL'den resume ID'yi al
        const urlParams = new URLSearchParams(window.location.search);
        const resumeId = urlParams.get('resume');
        
        let cvData = {};
        let selectedTemplate = 'modern';
        
        // EÄŸer resume ID varsa, API'den veriyi yÃ¼kle
        if (resumeId && window.apiClient && window.apiClient.token) {
            try {
                console.log('ðŸ“¥ CV Ã–nizleme: Resume ID ile veri yÃ¼kleniyor:', resumeId);
                
                // Ã–nce localStorage'Ä± temizle (Ã¶nceki CV verilerini temizle)
                localStorage.removeItem('cv-builder-data');
                localStorage.removeItem('cv-experiences');
                localStorage.removeItem('cv-education');
                localStorage.removeItem('cv-skills');
                localStorage.removeItem('cv-languages');
                
                // API'den resume verisini yÃ¼kle
                const resumeResponse = await window.apiClient.getResume(resumeId);
                
                if (resumeResponse.success && resumeResponse.data.resume) {
                    const resume = resumeResponse.data.resume;
                    
                    console.log('âœ… CV Ã–nizleme: Resume verisi yÃ¼klendi:', resume);
                    
                    // CV verilerini hazÄ±rla
                    cvData = {
                        'fullname-first': resume.firstName || '',
                        'fullname-last': resume.lastName || '',
                        email: resume.email || '',
                        phone: resume.phone || '',
                        location: resume.location || '',
                        profession: resume.profession || '',
                        summary: resume.summary || '',
                        website: resume.website || '',
                        experiences: Array.isArray(resume.experience) ? resume.experience : [],
                        education: Array.isArray(resume.education) ? resume.education : [],
                        skills: Array.isArray(resume.skills) ? resume.skills : [],
                        languages: Array.isArray(resume.languages) ? resume.languages : [],
                    };
                    
                    // Åžablonu al (resume'dan veya varsayÄ±lan)
                    selectedTemplate = resume.templateId || resume.template || 'modern';
                    
                    // localStorage'a kaydet (template renderer iÃ§in)
                    localStorage.setItem('cv-builder-data', JSON.stringify(cvData));
                    localStorage.setItem('cv-experiences', JSON.stringify(cvData.experiences));
                    localStorage.setItem('cv-education', JSON.stringify(cvData.education));
                    localStorage.setItem('cv-skills', JSON.stringify(cvData.skills));
                    localStorage.setItem('cv-languages', JSON.stringify(cvData.languages));
                    localStorage.setItem('selected-template', selectedTemplate);
                    localStorage.setItem('current-resume-id', resumeId);
                    
                    console.log('âœ… CV Ã–nizleme: Veriler localStorage\'a kaydedildi');
                } else {
                    console.error('âŒ CV Ã–nizleme: Resume verisi yÃ¼klenemedi');
                    // Hata durumunda localStorage'dan yÃ¼kle (fallback)
                    cvData = JSON.parse(localStorage.getItem('cv-builder-data') || '{}');
                    selectedTemplate = localStorage.getItem('selected-template') || 'modern';
                }
            } catch (error) {
                console.error('âŒ CV Ã–nizleme: Resume yÃ¼kleme hatasÄ±:', error);
                // Hata durumunda localStorage'dan yÃ¼kle (fallback)
                cvData = JSON.parse(localStorage.getItem('cv-builder-data') || '{}');
                selectedTemplate = localStorage.getItem('selected-template') || 'modern';
            }
        } else {
            // Resume ID yoksa localStorage'dan yÃ¼kle
            console.log('ðŸ“¥ CV Ã–nizleme: localStorage\'dan veri yÃ¼kleniyor');
            cvData = JSON.parse(localStorage.getItem('cv-builder-data') || '{}');
            selectedTemplate = localStorage.getItem('selected-template') || 'modern';
        }
        
        // Deneyimleri localStorage'dan al (eÄŸer cvData'da yoksa)
        if (!cvData.experiences || cvData.experiences.length === 0) {
            try {
                const experiences = JSON.parse(localStorage.getItem('cv-experiences') || '[]');
                if (experiences.length > 0) {
                    cvData.experiences = experiences;
                }
            } catch (e) {
                cvData.experiences = [];
            }
        }
        
        // EÄŸitim bilgilerini al (eÄŸer cvData'da yoksa)
        if (!cvData.education || cvData.education.length === 0) {
            try {
                const education = JSON.parse(localStorage.getItem('cv-education') || '[]');
                if (education.length > 0) {
                    cvData.education = education;
                }
            } catch (e) {
                cvData.education = [];
            }
        }
        
        // Yetenekleri al (eÄŸer cvData'da yoksa)
        if (!cvData.skills || cvData.skills.length === 0) {
            try {
                const skills = JSON.parse(localStorage.getItem('cv-skills') || '[]');
                if (skills.length > 0) {
                    cvData.skills = skills;
                }
            } catch (e) {
                cvData.skills = [];
            }
        }
        
        // Dilleri al (eÄŸer cvData'da yoksa)
        if (!cvData.languages || cvData.languages.length === 0) {
            try {
                const languages = JSON.parse(localStorage.getItem('cv-languages') || '[]');
                if (languages.length > 0) {
                    cvData.languages = languages;
                }
            } catch (e) {
                cvData.languages = [];
            }
        }
        
        // CV template renderer'Ä± kullan
        if (window.CVTemplateRenderer && window.CVTemplateRenderer.render) {
            // SeÃ§ili ÅŸablonu render et
            const html = window.CVTemplateRenderer.render(selectedTemplate, cvData);
            container.innerHTML = html;
            
            // Zoom'u uygula (CSS'teki 0.85 scale'i override eder)
            setTimeout(applyInitialZoom, 100);
        } else {
            // Template renderer yÃ¼klenmediyse bekle
            setTimeout(loadAndRenderCV, 100);
        }
    }
    
    // Sayfa yÃ¼klendiÄŸinde CV'yi render et
    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', loadAndRenderCV);
    } else {
        loadAndRenderCV();
    }
    
    // Son dÃ¼zenleme zamanÄ±nÄ± gÃ¼ncelle
    const lastEditedSpan = document.getElementById('last-edited');
    if (lastEditedSpan) {
        const now = new Date();
        const timeStr = now.toLocaleTimeString('tr-TR', { hour: '2-digit', minute: '2-digit' });
        lastEditedSpan.textContent = `Son dÃ¼zenleme: ${timeStr}`;
    }
})();
</script>

</body></html>

